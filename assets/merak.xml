<svg width="1200" height="1600" viewBox="0 0 1200 1600" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink">
  <defs>
    <style>
      .track-line { fill:none; stroke:#94a3b8; stroke-width:10; }
      .track-ties { fill:none; stroke:#a16207; stroke-width:18; }
      .wesel-path { transition: opacity 0.3s ease-in-out; }
      .platform { fill:#e2e8f0; stroke:#94a3b8; stroke-width:2; }
      .sig-bg { fill:#1e293b; rx:6; ry:6; }
      .sig-light { stroke:#0f172a; stroke-width:1; fill: #ef4444; }
      .txt { font-family: Arial, Helvetica, sans-serif; font-size:32px; fill:#0f172a; }
      .sig-label { font-family: Arial, sans-serif; font-size: 24px; fill: #fff; font-weight: bold; text-anchor: middle; }
      .hidden { opacity: 0; pointer-events: none; }

      /* Gaya dasar lokomotif */
      .loco-body { fill:#ef4444; stroke:#b91c1c; stroke-width:2; }
      .loco-detail { fill:#334155; }
      .carriage-body { fill:#3b82f6; stroke:#1e3a8a; stroke-width:2; }
    </style>
    
    <g id="track-segment">
        <path class="track-ties" d="M -10 0 L 10 0" />
        <path class="track-line" d="M 0 -20 L 0 20" />
    </g>

    <g id="loco-cc201-shape">
        <polygon class="loco-body" points="-40,-20 40,-20 50,0 40,20 -40,20 -50,0" />
        <rect class="loco-detail" x="-45" y="-10" width="10" height="20" />
        <rect class="loco-detail" x="35" y="-10" width="10" height="20" />
    </g>

    <g id="loco-cc203-shape">
        <polygon class="loco-body" points="-40,-20 40,-20 50,-10 50,10 40,20 -40,20" />
        <rect class="loco-detail" x="-45" y="-10" width="10" height="20" />
        <rect class="loco-detail" x="35" y="-10" width="10" height="20" />
    </g>

    <g id="loco-cc206-shape">
        <rect class="loco-body" x="-50" y="-20" width="100" height="40" rx="5" ry="5"/>
        <rect class="loco-detail" x="-45" y="-10" width="10" height="20" />
        <rect class="loco-detail" x="35" y="-10" width="10" height="20" />
    </g>

    <g id="carriage-shape">
        <rect class="carriage-body" x="-40" y="-15" width="80" height="30" rx="5"/>
    </g>
  </defs>

  <rect x="0" y="0" width="1200" height="1600" fill="#f8fafc" />

  <path class="track-ties" d="M500,1550 L500,1300" />
  <path class="track-line" d="M495,1550 L495,1300 M505,1550 L505,1300" />

  <path id="W1_to_J1" class="track-ties wesel-path hidden" d="M500,1300 Q 500 1225, 400 1150" />
  <path class="track-line wesel-path hidden" d="M495,1300 Q 495 1225, 395 1150 M505,1300 Q 505 1225, 405 1150" />
  <path id="W1_to_J2J3" class="track-ties wesel-path" d="M500,1300 L600,1150" />
  <path class="track-line wesel-path" d="M495,1300 L595,1150 M505,1300 L605,1150" />

  <path id="W2_to_J2" class="track-ties wesel-path" d="M600,1150 L600,1050" />
  <path class="track-line wesel-path" d="M595,1150 L595,1050 M605,1150 L605,1050" />
  <path id="W2_to_J3" class="track-ties wesel-path hidden" d="M600,1150 Q 700 1050, 800 950" />
  <path class="track-line wesel-path hidden" d="M595,1150 Q 695 1050, 795 950 M605,1150 Q 705 1050, 805 950" />

  <path class="track-ties" d="M400,1150 L400,250 M600,1050 L600,250 M800,950 L800,400" />
  <path class="track-line" d="M395,1150 L395,250 M405,1150 L405,250 M595,1050 L595,250 M605,1050 L605,250 M795,950 L795,400 M805,950 L805,400" />
  
  <path id="W3_to_J2_straight" class="track-ties wesel-path" d="M600,350 L600,250" />
  <path class="track-line wesel-path" d="M595,350 L595,250 M605,350 L605,250" />
  <path id="W3_to_J1_siding" class="track-ties wesel-path hidden" d="M600,350 C 550 350, 450 250, 400 250" />
  <path class="track-line wesel-path hidden" d="M595,350 C 545 350, 445 250, 395 250 M605,350 C 555 350, 455 250, 405 250" />

  <path class="track-ties" d="M400,250 L400,150" />
  <path class="track-line" d="M395,250 L395,150 M405,250 L405,150" />
  <rect x="382" y="130" width="36" height="20" fill="#333" />

  <rect class="platform" x="450" y="200" width="100" height="850" rx="0"/>
  <text class="txt" x="460" y="250">Jalur 1</text>
  <rect class="platform" x="650" y="200" width="100" height="850" rx="0"/>
  <text class="txt" x="660" y="250">Jalur 2</text>
  
  <g transform="translate(500,1350)">
    <rect class="sig-bg" x="-20" y="-40" width="40" height="80"/>
    <circle id="S_in" class="sig-light" cx="0" cy="-20" r="12"/>
    <text class="sig-label" y="15">S-M</text> <text class="txt" y="70" text-anchor="middle">S-Masuk</text>
  </g>
  <g transform="translate(400,1200)">
    <rect class="sig-bg" x="-20" y="-40" width="40" height="80"/>
    <circle id="S1_out" class="sig-light" cx="0" cy="-20" r="12"/>
    <text class="sig-label" y="15">S1-K</text> <text class="txt" y="70" text-anchor="middle">S1-Keluar</text>
  </g>
  <g transform="translate(600,1100)">
    <rect class="sig-bg" x="-20" y="-40" width="40" height="80"/>
    <circle id="S2_out" class="sig-light" cx="0" cy="-20" r="12"/>
    <text class="sig-label" y="15">S2-K</text> <text class="txt" y="70" text-anchor="middle">S2-Keluar</text>
  </g>
  <g transform="translate(800,1000)">
     <rect class="sig-bg" x="-20" y="-40" width="40" height="80"/>
    <circle id="S3_out" class="sig-light" cx="0" cy="-20" r="12"/>
    <text class="sig-label" y="15">S3-K</text> <text class="txt" y="70" text-anchor="middle">S3-Keluar</text>
  </g>
  
  <g transform="translate(400,280)">
    <rect class="sig-bg" x="-20" y="-40" width="40" height="80"/>
    <circle id="S1_langsir" class="sig-light" cx="0" cy="-20" r="12"/>
    <text class="sig-label" y="15">L-1</text> <text class="txt" y="-60" text-anchor="middle">Langsir 1</text>
  </g>
  <g transform="translate(600,380)">
    <rect class="sig-bg" x="-20" y="-40" width="40" height="80"/>
    <circle id="S2_langsir" class="sig-light" cx="0" cy="-20" r="12"/>
    <text class="sig-label" y="15">L-2</text> <text class="txt" y="-60" text-anchor="middle">Langsir 2</text>
  </g>

  <path id="route_masuk_J2" d="M500 1580 L 500 1300 L 600 1150 L 600 950" fill="none" stroke="transparent"/>
  <path id="route_J2_to_siding" d="M600 950 L 600 350 C 550 350, 450 250, 400 250 L 400 200" fill="none" stroke="transparent"/>
  <path id="route_siding_to_krenceng" d="M400 200 L 400 250 C 450 250, 550 350, 600 350 L 600 1150 L 500 1300 L 500 1580" fill="none" stroke="transparent"/>
  <path id="route_krenceng_to_J2_head" d="M500 1580 L 500 1300 L 600 1150 L 600 400" fill="none" stroke="transparent"/>
  
  <g id="train" visibility="hidden" transform="translate(500, 1580) rotate(90)">
    <g id="locomotive">
      <use xlink:href="#loco-cc201-shape" id="current-loco-shape" /> 
    </g>
    <g id="carriages" transform="translate(90, 0)">
      <use xlink:href="#carriage-shape"/>
      <use xlink:href="#carriage-shape" transform="translate(90, 0)"/>
    </g>
  </g>
</svg>